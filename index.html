<!doctype html>
<html lang="es">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" />
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />


<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="font-icons.css">
<link rel="stylesheet" href="elevation.css">
<link rel="stylesheet" href="numeric-keyboard.css">


<title>Farmacia</title>
<style>




	.wrapper-section{
	  height:100%;		
	  display: grid;	  
	  grid-template-columns: repeat(1, 100%);
	  grid-template-rows:auto 350px;
	  grid-gap: 6px;
	  grid-auto-rows: minmax(70px, auto);

	}

	.content-keyboard{				
		display:grid;
		height:100%;
		font-family: 'Share Tech Mono', monospace;
		grid-template:
			"pharma-product" 1fr
			"pharma-counter" 1fr
			"pharma-info" 80px
		;
	}

	.pharma-product{
		grid-area:"pharma-product";
	}

	.pharma-product >.title{
		font-size:26px;
		text-align:center;
		padding-top:20px;
		padding-left: 20px;
		padding-right: 20px;		
	}

	.pharma-counter{
		grid-area: "pharma-counter";		
	}

	.pharma-counter{
		text-align:center;
	}
	#textshow{
		font-size:50px;
		text-align:center;
	}

	.pharma-info{
		grid-area: "pharma-info";
		display:flex;
		flex-direction:row;
		
		align-items: stretch;
		align-content:flex-end;
		justify-content:flex-end;
		font-size:24px;
		background:#E0E0E0;


	}

	.pharma-info >div{
		text-align:center;	
	}





	



#textshowtotal{
	font-size:25px;
}
#textshowunit{
	font-size:20px;
}
  








.blackscreen{
	display:none;
	position:absolute;
	width:100%;
	height:100%;
	z-index:100;
	background-color:rgba(0,0,0,0.5);
	top:0;
	left:0;	
}


    </style>	
  </head>
  <body>

<div class="wrapper-section">
	
	<!--content-->
	<div class="content-keyboard"  >
		


		<div class="pharma-product" >
			<div style="padding-left:5px;padding-top:5px;" >
				<span onclick="openMenu()"  class="material-icons md-36" >menu</span>
			</div>		
			<div id="name" class="title">Acido Mefenamico</div>		
		</div>
		
		<div class="pharma-counter">
			<div id="textshow"></div>
			<div >
				<span>$</span><span id="textshowtotal"></span><span>(</span><span id="textshowunit"></span><span>)</span>
			</div>

		</div>

		<div class="pharma-info" >
			


			<div>
				<div>Total:</div>
				<div>$ <span>0</span></div>
			</div>



		</div>

	</div>
	<!--content-->


<div class="wrapper notselect">
  <div class="row">
  	<div class="item elevation" number-value="1"><span class="text-number" >1</span></div>
  	<div class="item elevation" number-value="2"><span class="text-number" >2</span></div>
  	<div class="item elevation" number-value="3"><span class="text-number" >3</span></div>
  	
  	<div class="item elevation box-success" backspace >
  		<span  class="material-icons md-36">backspace</span>
  	</div>

  </div>
  <div class="row">
  	<div class="item elevation" number-value="4"><span class="text-number" >4</span></div>
  	<div class="item elevation" number-value="5"><span class="text-number" >5</span></div>
  	<div class="item elevation" number-value="6"><span class="text-number" >6</span></div>
  	 	<div class="item elevation box-success" >
  		<span  class="material-icons md-36" onclick="showlist()">list</span>
  	</div>
  </div>
    <div class="row">
  	<div class="item elevation" number-value="7"><span class="text-number" >7</span></div>
  	<div class="item elevation" number-value="8"><span class="text-number" >8</span></div>
  	<div class="item elevation" number-value="9" ><span class="text-number" >9</span></div>
  	<div class="item elevation box-success" >
  		<img src="whatsapp-logo.svg" draggable="false" ondragstart="return false;"  >
  	</div>
  </div>
    <div class="row">

  	<div class="item elevation box-success" >
  		<span  class="material-icons md-36" onclick="before()">navigate_before</span>
  	</div>
  	
  	<div class="item elevation" number-value="0"><span class="text-number"  >0</span></div>
  	<div class="item elevation box-success" >
  		<span  class="material-icons md-36" onclick="next()">navigate_next</span>
  	</div>
  	<div class="item elevation box-success" onclick="done()"  >
  		<span  class="material-icons md-36">done</span>
  	</div>
  </div> 
</div>

	
</div>



<div id="blackscreen" class="blackscreen" onclick="closeMenu()" ></div>


<style>
	
	.modal-wrapper{
		visibility:hidden;
		display:none;
		position:absolute;
		top:0;
		left:0;
		width:100%;
		height:100%;
		z-index:12;
		background-color:rgba(255,255,255);
		display:flex;
		flex-direction:column;
		justify-content:center;
		overflow:auto;
		font-family: 'Share Tech Mono', monospace;
	}
	.modal{
	
	}

	.modal-wrapper ul{
		list-style:none;
		margin:0px;
		padding:0px;
	}

	.modal-wrapper ul li{		
		padding-top:12px;
		padding-bottom:12px;		
		font-size:22px;
		display:block;
		float:left;
		width:100%;
		border-bottom:solid 1px silver;
	}
	.modal-wrapper ul li span{
		margin-left:12px;
	}

	.modal-close{
		position:fixed;
		bottom: 0px;
		height:50px;
		background-color:#EAEAEA;
		width:100%;
		border-top:solid 1px silver;
	}




</style>


<div id="modal-list" class="modal-wrapper">
	<div class="modal">
		<div clas="modal-header"></div>
		<div id="modal-content-list" class="modal-content"></div>
		<div class="modal-close box-success notselect">
			<span  class="material-icons md-36" onclick="hiddenlist()" >close</span>
		</div>
	</div>			

</div>



<script type="text/javascript" src="numeric-keyboard.js" ></script>
<script type="text/javascript" src="https://unpkg.com/pp-model.js@1.0.7/pp-model.min.js" ></script>
<script type="text/javascript" src="items.js" ></script>
<script type="text/javascript">



// Esperate un poquitico
var Items = [];

var model = new ppModel({
	defaults:{
		count:0
	}
});

for( var i = 0 ; i < items.length ; i++ ){

	Items.push( new model(items[i]) );
}


function getLIstItems(){
	var vtr = "<ul>";
	for(var i = 0; i < items.length;i++){
		vtr +="<li onclick='itemsList()'>";
		vtr += "<span>"+items[i][0]+"</span>"; 
		vtr +="</li>";
	}
	vtr +="</ul>";
	return  vtr;
}



//console.log( Items );



function itemsList(){
	document.getElementById("modal-list").style.display="none";
	document.getElementById("modal-list").style.visibility="hidden";	
}


function showlist(){

	document.getElementById("modal-list").style.display="block";
	document.getElementById("modal-list").style.visibility="visible";
	document.getElementById("modal-content-list").innerHTML = getLIstItems();

}

function hiddenlist(){
	document.getElementById("modal-list").style.display="none";
	document.getElementById("modal-list").style.visibility="hidden";	
}

function showwsp(){
	alert("Abrir Wassap");
}



function openMenu(){
	document.getElementById("blackscreen").style.display = "block";
}

function closeMenu(){
	document.getElementById("blackscreen").style.display = "none";
}




var indice = 0;



function draw( _indice ){

	console.log( _indice );

	document.getElementById("name").innerText = items[indice][0];
	document.getElementById("textshow").innerText = items[indice][2] === undefined ? "0":items[indice][2];
	document.getElementById("textshowunit").innerText = items[indice][1];	
	document.getElementById("textshowtotal").innerText = "0";	

}


function before(){
		// Aqui Estamos trabajando
		console.log( indice );
		console.log( items.length );
		if( indice == 0 ){ indice=items.length; }else{ indice--; }
		console.log( indice );
		draw( indice )
}

function next(){
	draw(null);
	if( indice < (items.length-1) ){ indice++; }else{ indice=0; }

}

function done(){
	draw(null)
	if( indice < (items.length-1) ){ indice++; }else{ indice=0; }
}


done();





	const buttons = document.getElementsByClassName("item"); //document.getElementsByTagName("button");

	for (const button of buttons) {
	  button.addEventListener("click", function(event){
	  	createRipple(event);

	  	const number = event.currentTarget.getAttribute("number-value")
	  	const numberPrevius = document.getElementById("textshow").innerText;

	  	
	  	// ----------------------------------------------------------------
	  	if(number != null){

	  		const numadd = parseInt(  (numberPrevius == "0" ? "" : numberPrevius ) + number );	  		
		document.getElementById("textshowtotal").innerText =  items[(indice-1)][1] * numadd;	
	  		
	  		
	  		document.getElementById("textshow").innerText = numadd;
	  	}
	  	// ----------------------------------------------------------------	  	
	  	if( event.currentTarget.hasAttribute("backspace") ){

	  		const numadd = parseInt(  numberPrevius.slice(0, -1) == "" ? "0":  numberPrevius.slice(0, -1) );	  		
		document.getElementById("textshowtotal").innerText =  items[(indice-1)][1] * numadd;
		
	  		    
	  		document.getElementById("textshow").innerText = numberPrevius.slice(0, -1) == "" ? "0":  numberPrevius.slice(0, -1);
	  	}
	  	

	  });	  
	}
</script>


</body>
</html>